
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>SmartKarrot API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;swift&quot;,&quot;java&quot;,&quot;javascript&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="swift">swift</a>
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="javascript">javascript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#sandbox" class="toc-h1 toc-link" data-title="Sandbox">Sandbox</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#sandbox-urls" class="toc-h2 toc-link" data-title="Sandbox URLs">Sandbox URLs</a>
                  </li>
                  <li>
                    <a href="#create-your-account" class="toc-h2 toc-link" data-title="Create Your Account">Create Your Account</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#signing-requests" class="toc-h2 toc-link" data-title="Signing Requests">Signing Requests</a>
                  </li>
                  <li>
                    <a href="#making-a-request" class="toc-h2 toc-link" data-title="Making a Request">Making a Request</a>
                  </li>
                  <li>
                    <a href="#security-best-practices" class="toc-h2 toc-link" data-title="Security Best Practices">Security Best Practices</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#pagination" class="toc-h1 toc-link" data-title="Pagination">Pagination</a>
          </li>
          <li>
            <a href="#idempotent-requests" class="toc-h1 toc-link" data-title="Idempotent Requests">Idempotent Requests</a>
          </li>
          <li>
            <a href="#versioning" class="toc-h1 toc-link" data-title="Versioning">Versioning</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
          <li>
            <a href="#data-types" class="toc-h1 toc-link" data-title="Data Types">Data Types</a>
          </li>
          <li>
            <a href="#authentication-2" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
          </li>
          <li>
            <a href="#usage-analytics-core-apis" class="toc-h1 toc-link" data-title="Usage Analytics (Core) APIs">Usage Analytics (Core) APIs</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#log-user-attribute" class="toc-h2 toc-link" data-title="Log User Attribute">Log User Attribute</a>
                  </li>
                  <li>
                    <a href="#log-app-events" class="toc-h2 toc-link" data-title="Log App Events">Log App Events</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#referral-apis" class="toc-h1 toc-link" data-title="Referral APIs">Referral APIs</a>
          </li>
          <li>
            <a href="#segmentation-apis" class="toc-h1 toc-link" data-title="Segmentation APIs">Segmentation APIs</a>
          </li>
          <li>
            <a href="#analytics-apis" class="toc-h1 toc-link" data-title="Analytics APIs">Analytics APIs</a>
          </li>
          <li>
            <a href="#rich-push-apis" class="toc-h1 toc-link" data-title="Rich Push APIs">Rich Push APIs</a>
          </li>
          <li>
            <a href="#geofencing-apis" class="toc-h1 toc-link" data-title="Geofencing APIs">Geofencing APIs</a>
          </li>
          <li>
            <a href="#gamification-apis" class="toc-h1 toc-link" data-title="Gamification APIs">Gamification APIs</a>
          </li>
          <li>
            <a href="#journey-design-apis" class="toc-h1 toc-link" data-title="Journey Design APIs">Journey Design APIs</a>
          </li>
          <li>
            <a href="#donation-apis" class="toc-h1 toc-link" data-title="Donation APIs">Donation APIs</a>
          </li>
          <li>
            <a href="#wallet-apis" class="toc-h1 toc-link" data-title="Wallet APIs">Wallet APIs</a>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li><a href='#'>Sign Up for a Developer Key</a></li>
            <li>Â© 2018 SmartKarrot, Inc.</li>
            <li>All rights reserved.</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the SmartKarrot API! SmartKarrot offers private REST APIs for all its SaaS services. Our APIs make it easier to quickly configure and integrate otherwise complex functionalities like referrals, user segmentation, geofencing, actions like rich push, gamification, surveys and feedback, analytics, donations, a full-fledged journey designer, wallets for cryptocurrency and fiat currency, and smart contracts on public and permissioned blockchains.</p>

<p>We have language bindings in Swift, Java, and JavaScript! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='sandbox'>Sandbox</h1>
<p>SmartKarrot&#39;s sandbox site is an instance of the SmartKarrot SaaS platform. It offers the full SmartKarrot functionality with certain rate control limits. Financial transactions involving fiat and cryptocurrency use test funds and not real funds.</p>
<h2 id='sandbox-urls'>Sandbox URLs</h2>
<p><strong>REST API</strong>   <a href="https://api.sandbox.smartkarrot.com/">https://api.sandbox.smartkarrot.com/</a></p>
<h2 id='create-your-account'>Create Your Account</h2>
<p>Go to the <a href="https://sandbox.smartkarrot.com">sandbox site</a> to register for a sandbox account to start using the SDK.</p>
<h1 id='authentication'>Authentication</h1><h2 id='signing-requests'>Signing Requests</h2><h2 id='making-a-request'>Making a Request</h2><h2 id='security-best-practices'>Security Best Practices</h2><h1 id='pagination'>Pagination</h1>
<p>Top-level APIs have support for bulk fetches using &quot;list&quot; API methods. For example, you can list successful referrals, and the users in a segment. Paginated APIs use at least these two parameters: startingAfter and limit.</p>
<h1 id='idempotent-requests'>Idempotent Requests</h1>
<p>SmartKarrot API supports idempotency for safely retrying requests without accidentally performing the same operation twice. This is useful when an API call is disrupted in transit and you do not receive a response. For example, if a request to log an app event fails due to a network connection error, you can retry the request with the same idempotency key to guarantee that only a single event is created.</p>

<p>An idempotency key is a unique value generated by the client which the server uses to recognize subsequent retries of the same request. How you create unique keys is up to you, but we suggest using version 4 UUIDs, or another random string with enough entropy to avoid collisions.</p>

<p>To perform an idempotent request, provide a key to setIdempotencyKey() on a request.</p>
<h1 id='versioning'>Versioning</h1><h1 id='errors'>Errors</h1><h1 id='data-types'>Data Types</h1>
<p>The SDK uses the following data types.</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>string</td>
<td>A simple quoted string, following standard JSON rules; see the <a href="http://json.org/">JSON spec</a> for details.</td>
</tr>
<tr>
<td>integer</td>
<td>A whole number, transmitted as a JSON number.</td>
</tr>
<tr>
<td>boolean</td>
<td>A JSON boolean, the literal string true or false.</td>
</tr>
<tr>
<td>array</td>
<td>A JSON array. Each element contains a payload that will be described.</td>
</tr>
<tr>
<td>timestamp</td>
<td>Time in UTC stored in the <a href="https://en.wikipedia.org/wiki/ISO_8601">ISO 8601</a> format with millisecond precision. (Example: 2018-09-29T09:58:44.635Z)</td>
</tr>
<tr>
<td>uuid</td>
<td>A UUID string. Preferably a version 4 UUID. Example: <code>f30ccccf-54a8-49bf-b3e4-6eee274810ab</code>.</td>
</tr>
<tr>
<td>decimal</td>
<td>A decimal value, encoded in a JSON string. The contents will be a series of digits, followed by an optional decimal point and additional digits.</td>
</tr>
</tbody></table>
<h1 id='authentication-2'>Authentication</h1>
<blockquote>
<p>To authorize, use this code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'smartkarrot_core'</span>

<span class="n">api</span> <span class="o">=</span> <span class="no">SmartKarrot</span><span class="o">::</span><span class="no">APIClient</span><span class="p">.</span><span class="nf">authorize!</span><span class="p">(</span><span class="s1">'api_key'</span><span class="p">)</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">smartkarrot_core</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">smartkarrot</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="s">'api_key'</span><span class="p">)</span>
</code></pre><pre class="highlight shell tab-shell"><code><span class="c"># With shell, you can just pass the correct header with each request</span>
curl <span class="s2">"api_endpoint_here"</span>
  -H <span class="s2">"Authorization: api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">smartkarrot</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'smartkarrot_core'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">smartkarrot</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s1">'api_key'</span><span class="p">);</span>
</code></pre>
<blockquote>
<p>Make sure to replace <code>api_key</code> with your API key.</p>
</blockquote>

<p>SmartKarrot uses API keys to allow access to the API. You can register a new SmartKarrot API key at our <a href="http://smartkarrot.com/developers">developer portal</a>.</p>

<p>SmartKarrot expects for the API key to be included in all API requests to the server in a header that looks like the following:</p>

<p><code>Authorization: api_key</code></p>

<aside class="notice">
You must replace <code>api_key</code> with your personal API key.
</aside>
<h1 id='usage-analytics-core-apis'>Usage Analytics (Core) APIs</h1><h2 id='log-user-attribute'>Log User Attribute</h2><h2 id='log-app-events'>Log App Events</h2><pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'smartkarrot_core'</span>

<span class="n">api</span> <span class="o">=</span> <span class="no">SmartKarrot</span><span class="o">::</span><span class="no">APIClient</span><span class="p">.</span><span class="nf">authorize!</span><span class="p">(</span><span class="s1">'api_key'</span><span class="p">)</span>
<span class="n">api</span><span class="p">.</span><span class="nf">smartkarrot</span><span class="p">.</span><span class="nf">get</span>
</code></pre><pre class="highlight python tab-python"><code><span class="kn">import</span> <span class="nn">smartkarrot_core</span>

<span class="n">api</span> <span class="o">=</span> <span class="n">smartkarrot_core</span><span class="o">.</span><span class="n">authorize</span><span class="p">(</span><span class="s">'api_key'</span><span class="p">)</span>
<span class="n">api</span><span class="o">.</span><span class="n">referrals</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</code></pre><pre class="highlight shell tab-shell"><code>curl <span class="s2">"http://example.com/api/referrals"</span>
  -H <span class="s2">"Authorization: api_key"</span>
</code></pre><pre class="highlight javascript tab-javascript"><code><span class="kr">const</span> <span class="nx">smartkarrot_core</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'smartkarrot_core'</span><span class="p">);</span>

<span class="kd">let</span> <span class="nx">api</span> <span class="o">=</span> <span class="nx">smartkarrot_core</span><span class="p">.</span><span class="nx">authorize</span><span class="p">(</span><span class="s1">'api_key'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">referrals</span> <span class="o">=</span> <span class="nx">api</span><span class="p">.</span><span class="nx">referrals</span><span class="p">.</span><span class="nx">get</span><span class="p">();</span>
</code></pre>
<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Fluffums"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"breed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"calico"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fluffiness"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cuteness"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Max"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"breed"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unknown"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"fluffiness"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
    </span><span class="s2">"cuteness"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>The endpoint logs a set of app events.</p>
<h3 id='https-request'>HTTPS Request</h3>
<p><code>POST https://api.smartkarrot.com/v1/logEvents</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>eventId</td>
<td>uuid</td>
<td>required</td>
<td>A unique identifier for the event.</td>
</tr>
<tr>
<td>eventName</td>
<td>string</td>
<td>required</td>
<td>The name of the event. Example: &quot;Purchased Product&quot;. Event names can be up to 40 characters.</td>
</tr>
<tr>
<td>loggedAtTime</td>
<td>timestamp</td>
<td>required</td>
<td>The time at which the event was generated.</td>
</tr>
<tr>
<td>attributes</td>
<td>node</td>
<td>optional</td>
<td>Attributes of the event. An event can have up to ten attributes.</td>
</tr>
</tbody></table>

<p>An attribute of the event is a key value pair.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>key</td>
<td>string</td>
<td>required</td>
<td>The attribute name. Example: &quot;SKU&quot;. Attribute names can be up to 40 characters.</td>
</tr>
<tr>
<td>value</td>
<td>multiple</td>
<td>required</td>
<td>The value of the attribute. Example: &quot;UA064-8365&quot;. Values can be of type string, integer, decimal or date. Values of type string can be up to 40 characters long.</td>
</tr>
</tbody></table>

<aside class="warning">
Remember â Use an idempotency key to ensure that an event is not logged twice. This can happen when an API call is disrupted in transit due to a network connection error and you do not receive a response. You can retry the request with the same idempotency key to guarantee that only a single event is created.
</aside>
<h1 id='referral-apis'>Referral APIs</h1><h1 id='segmentation-apis'>Segmentation APIs</h1><h1 id='analytics-apis'>Analytics APIs</h1><h1 id='rich-push-apis'>Rich Push APIs</h1><h1 id='geofencing-apis'>Geofencing APIs</h1><h1 id='gamification-apis'>Gamification APIs</h1><h1 id='journey-design-apis'>Journey Design APIs</h1><h1 id='donation-apis'>Donation APIs</h1><h1 id='wallet-apis'>Wallet APIs</h1><h1 id='errors'>Errors</h1>
<aside class="notice">
This error section is stored in a separate file in <code>includes/_errors.md</code>. Slate allows you to optionally separate out your docs into many files...just save them to the <code>includes</code> folder and add them to the top of your <code>index.md</code>'s frontmatter. Files are included in the order listed.
</aside>

<p>The Kittn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request -- Your request is invalid.</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized -- Your API key is wrong.</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden -- The kitten requested is hidden for administrators only.</td>
</tr>
<tr>
<td>404</td>
<td>Not Found -- The specified kitten could not be found.</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed -- You tried to access a kitten with an invalid method.</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable -- You requested a format that isn&#39;t json.</td>
</tr>
<tr>
<td>410</td>
<td>Gone -- The kitten requested has been removed from our servers.</td>
</tr>
<tr>
<td>418</td>
<td>I&#39;m a teapot.</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests -- You&#39;re requesting too many kittens! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error -- We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable -- We&#39;re temporarily offline for maintenance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="swift">swift</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="javascript">javascript</a>
          </div>
      </div>
    </div>
  </body>
</html>
